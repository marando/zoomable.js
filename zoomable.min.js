(function($){jQuery.fn.zoomable=function(options){$(this).each(function(){options=initOptions(options,$(this));$('<img/>').src=options.fullsize;varimg=createImgComponent(options);varcontainer=createContainerComponent(options,img);$(this).click(function(){container.appendTo('body').fadeIn(options.speed,options.onshow);if(options.blur&&options.blur!='0'&&options.blur!='0px'){$({blurRadius:0}).animate({blurRadius:options.blur},{duration:options.speed,easing:'swing',step:function(){$('.container').css({"-webkit-filter":"blur("+this.blurRadius+"px)","filter":"blur("+this.blurRadius+"px)"});}});}disableBodyScroll();});container.click(function(){$(this).fadeOut(options.speed,options.onhide);if(options.blur&&options.blur!='0'&&options.blur!='0px'){varblurNoPx=options.blur.replace('px','');$({blurRadius:blurNoPx}).animate({blurRadius:0},{duration:options.speed,easing:'swing',step:function(){$('.container').css({"-webkit-filter":"blur("+this.blurRadius+"px)","filter":"blur("+this.blurRadius+"px)"});}});}enableBodyScroll();});});};functioninitOptions(options,parent){options=$.extend({},$.fn.zoomable.defaults,options);if(parent.attr('fullsize')){options.fullsize=parent.attr('fullsize');}else{options.fullsize=parent.attr('src');}returnoptions;}functioncreateImgComponent(options){varimg=$('<img/>',{'src':options.fullsize,})img.css({'max-height':'100%','max-width':'100%','position':'relative','top':'50%','transform':'translateY(-50%)','border':options.border,'border-radius':options.radius,'box-shadow':options.shadow,});returnimg;}functioncreateContainerComponent(options,img){varcontainer=$('<div/>',{'class':'zoomable-container','html':img,});container.css({'background-color':options.bgcolor,'padding':options.padding,'text-align':'center','position':'fixed','top':'0','left':'0','z-index':9999999,'height':'100%','width':'100%','display':'none',});if(options.fill==true){container.css({padding:0});container.html('');container.css({background:'url('+options.fullsize+')','background-size':'cover','background-position':'center',});}container.css({'background-color':container.css('background-color').replace('rgb','rgba').replace(')','')+','+options.opacity+')'});returncontainer;}functionanimateBlur(elem,startSize,endSize,speed){startSize=(startSize+'').replace('px','');$({blurRadius:startSize}).animate({blurRadius:endSize},{duration:4000,easing:'linear',step:function(){$('.container').css({"-webkit-filter":"blur("+endSize+")","filter":"blur("+endSize+")"});}});}functiondisableBodyScroll(){$('html,body').css({'overflow':'hidden',});}functionenableBodyScroll(){$('html,body').css({'overflow':'auto',});}$.fn.zoomable.defaults={padding:'15px',bgcolor:'hsl(0,4%,3%)',opacity:'0.75',blur:'0px',speed:250,border:'1pxsolidhsl(0,4%,17%)',radius:'2px',shadow:'0014pxhsla(0,4%,3%,0.33)',fill:false,onshow:function(){},onhide:function(){},};})(jQuery);
